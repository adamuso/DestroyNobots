mov r1, lidt_ptrs
mov addr[lidt_ptrs], int0
mov r2, addr[lidt_ptrs]
mov addr[r1], r2
add r1, 4
mov addr[r1], int1
mov r1, lidt_ptrs
lidt r1

start:
	mov r3, 1
	mov r4, 2
loop:
	out 0x0, 0x80
	out 0x0, r3
	out 0x0, 0x81
	out 0x0, r4
	halt
	jmp loop

int0:
	halt
int1:
	halt

lidt_ptrs:
	reserve 256, dword